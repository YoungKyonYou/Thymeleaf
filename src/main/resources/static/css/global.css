/* ===== 무대 ===== */
.loading-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.6);
  display:flex; align-items:center; justify-content:center; gap:.5rem;
  z-index:9999; overflow:hidden;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;
  --cycle: 6s; /* 한 사이클 길이 */
}
.loading-text{
  position:relative; display:inline-block; color:#fff; font-size:2.2rem; font-weight:800;
  will-change: transform, opacity, filter, text-shadow;
}

/* ===== 1) '교' = 사수 (두 발) ===== */
.loading-text:nth-child(1){
  animation: gunner var(--cycle) linear infinite, flash var(--cycle) linear infinite;
}
/* 총(🔫) — 오른쪽 향하게 반전 */
.loading-text:nth-child(1)::before{
  content:"🔫";
  position:absolute; top:-0.38em; right:-1.6em; font-size:1.45rem;
  transform-origin:.25em 1.2em; opacity:.95;
  transform:scaleX(-1) rotate(8deg);
  animation: gun-aim var(--cycle) linear infinite;
}
/* 총구 이펙트(섬광→연기) — 1발(≈30%), 2발(≈62%) */
.loading-text:nth-child(1)::after{
  content:"";
  position:absolute; top:-.1em; right:-2.25em; width:.6rem; height:.6rem; border-radius:50%;
  pointer-events:none; opacity:0; transform:scale(.4);
  background: radial-gradient(circle, rgba(255,245,180,1) 0%, rgba(255,190,80,.95) 45%, rgba(255,160,50,0) 70%);
  filter: blur(.5px);
  animation: muzzleSmoke var(--cycle) linear infinite;
}

/* ===== 2) 통·복·지 = 도망 ===== */
.loading-text:nth-child(2){ animation: flee var(--cycle) ease-in-out infinite .02s; }
.loading-text:nth-child(3){ animation: flee var(--cycle) ease-in-out infinite .06s; }
.loading-text:nth-child(4){ animation: flee var(--cycle) ease-in-out infinite .10s; }

/* ===== 3) '포' = 1발에 맞아 폭발 후 사망 ===== */
.loading-text:nth-child(5){
  animation: die1 var(--cycle) linear infinite;
}
/* 폭발 임팩트(포) — 크게/선명하게 터졌다가 잔광 */
.loading-text:nth-child(5)::after{
  content:"";
  position:absolute; left:50%; top:50%; width:.6rem; height:.6rem; border-radius:50%;
  transform: translate(-50%,-50%) scale(.2);
  opacity:0; pointer-events:none;
  background:
          radial-gradient(circle, rgba(255,255,200,1) 0%, rgba(255,220,120,.9) 40%, rgba(255,150,40,0) 70%);
  box-shadow:
          0 0 20px rgba(255,240,160,1),
          0 0 40px rgba(255,210,90,.9),
          0 0 80px rgba(255,180,60,.8);
  animation: boom1 var(--cycle) linear infinite;
}
/* 파편 스파크(포) */
.loading-text:nth-child(5)::before{
  content:"✹";
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%) scale(.3) rotate(0deg);
  opacity:0; color:#ffd873; text-shadow:
        0 0 14px rgba(255,220,120,1),
        0 0 28px rgba(255,190,80,.9);
  animation: sparks1 var(--cycle) linear infinite;
}

/* ===== 4) '탈' = 2발에 맞아 폭발 후 사망 ===== */
.loading-text:nth-child(6){
  animation: die2 var(--cycle) linear infinite;
}
/* 폭발 임팩트(탈) */
.loading-text:nth-child(6)::after{
  content:"";
  position:absolute; left:50%; top:50%; width:.6rem; height:.6rem; border-radius:50%;
  transform: translate(-50%,-50%) scale(.2);
  opacity:0; pointer-events:none;
  background:
          radial-gradient(circle, rgba(255,255,200,1) 0%, rgba(255,220,120,.9) 40%, rgba(255,150,40,0) 70%);
  box-shadow:
          0 0 20px rgba(255,240,160,1),
          0 0 40px rgba(255,210,90,.9),
          0 0 80px rgba(255,180,60,.8);
  animation: boom2 var(--cycle) linear infinite;
}
/* 파편 스파크(탈) */
.loading-text:nth-child(6)::before{
  content:"✹";
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%) scale(.3) rotate(0deg);
  opacity:0; color:#ffd873; text-shadow:
        0 0 14px rgba(255,220,120,1),
        0 0 28px rgba(255,190,80,.9);
  animation: sparks2 var(--cycle) linear infinite;
}

/* ===== 키프레임 ===== */
/* 교: 겨냥→발사→반동 (두 구간) */
@keyframes gunner{
  0%{transform:translateY(0) rotate(0)}
  16%{transform:translateY(-1px) rotate(1deg)}
  24%{transform:translateY(-1px) rotate(1deg)}
  30%{transform:translateY(0) rotate(0)}      /* 1발 직전 고정 */
  32%{transform:translateY(-3px) rotate(-6deg)} /* 1발 반동 */
  40%{transform:translateY(0) rotate(0)}
  56%{transform:translateY(-1px) rotate(1deg)} /* 2발 겨냥 */
  60%{transform:translateY(0) rotate(0)}
  62%{transform:translateY(-3px) rotate(-6deg)}/* 2발 반동 */
  70%,100%{transform:translateY(0) rotate(0)}
}
@keyframes gun-aim{
  0%{transform:scaleX(-1) rotate(10deg)}
  18%{transform:scaleX(-1) rotate(-8deg)}     /* 1발 겨냥 */
  30%{transform:scaleX(-1) rotate(-12deg)}    /* 1발 발사 */
  36%{transform:scaleX(-1) rotate(0deg)}      /* 반동 복원 */
  56%{transform:scaleX(-1) rotate(-8deg)}     /* 2발 겨냥 */
  62%{transform:scaleX(-1) rotate(-12deg)}    /* 2발 발사 */
  68%{transform:scaleX(-1) rotate(0deg)}
  100%{transform:scaleX(-1) rotate(10deg)}
}
/* 글자 섬광 — 두 번 강하게 번쩍 */
@keyframes flash{
  0%,26%{text-shadow:none; color:#fff}
  28%{
    color:#fffbdb;
    text-shadow:
            0 0 22px rgba(255,255,180,1),
            0 0 44px rgba(255,220,120,.95),
            0 0 88px rgba(255,200,80,.85);
  }
  34%{text-shadow:none; color:#fff}
  58%{
    color:#fffbdb;
    text-shadow:
            0 0 22px rgba(255,255,180,1),
            0 0 44px rgba(255,220,120,.95),
            0 0 88px rgba(255,200,80,.85);
  }
  66%,100%{text-shadow:none; color:#fff}
}
/* 총구 섬광→연기 — 1발(28~38%), 2발(60~70%) */
@keyframes muzzleSmoke{
  0%,26%{opacity:0; transform:scale(.4); filter:blur(.5px)}
  28%{opacity:1; transform:scale(1.9); filter:blur(0)}
  32%{
    opacity:.8; transform:scale(1.5);
    background: radial-gradient(circle, rgba(255,245,200,1) 0%, rgba(255,210,120,.9) 40%, rgba(255,160,50,0) 70%);
  }
  38%{opacity:.2; transform:translate(18px,-16px) scale(1.4); filter:blur(1.2px)}
  58%{opacity:0; transform:scale(.4)}
  60%{opacity:1; transform:scale(1.9); filter:blur(0)}  /* 2차 섬광 */
  64%{
    opacity:.8; transform:scale(1.5);
    background: radial-gradient(circle, rgba(255,245,200,1) 0%, rgba(255,210,120,.9) 40%, rgba(255,160,50,0) 70%);
  }
  70%{opacity:.2; transform:translate(18px,-16px) scale(1.4); filter:blur(1.2px)}
  100%{opacity:0; transform:scale(.4)}
}

/* 일반 도망(통/복/지) */
@keyframes flee{
  0%,26%{transform:translateX(0) translateY(0) rotate(0); opacity:1}
  28%{transform:translateY(-10px) rotate(-8deg)}
  32%{transform:translateY(0) rotate(0)}
  42%{transform:translateX(90px) translateY(-2px) rotate(2deg)}
  58%{transform:translateX(180px) translateY(1px) rotate(-3deg)}
  74%{transform:translateX(260px) translateY(-1px) rotate(2deg)}
  82%{transform:translateX(320px); opacity:.7}
  88%{transform:translateX(-20px); opacity:0}  /* 리셋 */
  100%{transform:translateX(0); opacity:1}
}

/* 포: 1발 피탄 → 폭발 → 쓰러짐 → 소멸 → 리셋 */
@keyframes die1{
  0%,24%{transform:translateX(0) translateY(0) rotate(0); opacity:1; filter:none}
  28%{transform:translateY(-10px) rotate(-6deg)}
  33%{transform:translateX(70px) translateY(0) rotate(0)}
  36%{
    transform:translateX(95px) translateY(-6px) rotate(-12deg) scale(1.06);
    text-shadow:0 0 14px rgba(255,90,90,.85);
    filter:brightness(1.25) contrast(1.2);
  }
  48%{transform:translateX(120px) translateY(16px) rotate(88deg) scale(.96); opacity:.9; filter:grayscale(.3)}
  62%{transform:translateX(130px) translateY(28px) rotate(120deg) scale(.85); opacity:.5; filter:grayscale(.7) blur(.4px)}
  74%{transform:translateX(130px) translateY(34px) rotate(140deg) scale(.7); opacity:.18; filter:grayscale(1) blur(.7px)}
  86%{transform:translateX(-20px) translateY(0) rotate(0) scale(1); opacity:0; filter:none} /* 리셋 위치 */
  100%{transform:translateX(0) translateY(0) rotate(0) scale(1); opacity:1; filter:none}
}
/* 탈: 2발 피탄 → 폭발 → 쓰러짐 → 소멸 → 리셋 */
@keyframes die2{
  0%,56%{transform:translateX(0) translateY(0) rotate(0); opacity:1; filter:none}
  58%{transform:translateY(-10px) rotate(-6deg)}
  60%{transform:translateX(70px) translateY(0) rotate(0)}
  62%{
    transform:translateX(95px) translateY(-6px) rotate(-12deg) scale(1.06);
    text-shadow:0 0 14px rgba(255,90,90,.85);
    filter:brightness(1.25) contrast(1.2);
  }
  74%{transform:translateX(120px) translateY(16px) rotate(88deg) scale(.96); opacity:.9; filter:grayscale(.3)}
  86%{transform:translateX(130px) translateY(28px) rotate(120deg) scale(.84); opacity:.45; filter:grayscale(.7) blur(.4px)}
  92%{transform:translateX(130px) translateY(34px) rotate(140deg) scale(.7); opacity:.15; filter:grayscale(1) blur(.7px)}
  96%{transform:translateX(-20px) translateY(0) rotate(0) scale(1); opacity:0; filter:none}
  100%{transform:translateX(0) translateY(0) rotate(0) scale(1); opacity:1; filter:none}
}

/* 폭발(포) — 강하게 크게, 이후 잔광 */
@keyframes boom1{
  0%,28%{opacity:0; transform:translate(-50%,-50%) scale(.2)}
  30%{
    opacity:1; transform:translate(-50%,-50%) scale(2.2);
    box-shadow:
            0 0 28px rgba(255,240,160,1),
            0 0 64px rgba(255,210,90,.95),
            0 0 110px rgba(255,180,60,.85);
  }
  34%{opacity:.6; transform:translate(-50%,-50%) scale(1.6)}
  40%{opacity:.2; transform:translate(-50%,-50%) scale(1.2)}
  50%{opacity:0}
  100%{opacity:0; transform:translate(-50%,-50%) scale(.2)}
}
/* 스파크(포) */
@keyframes sparks1{
  0%,28%{opacity:0; transform:translate(-50%,-50%) scale(.3) rotate(0)}
  30%{opacity:1; transform:translate(-50%,-50%) scale(1.4) rotate(40deg)}
  36%{opacity:.5; transform:translate(-50%,-50%) scale(1.1) rotate(90deg)}
  46%{opacity:0; transform:translate(-50%,-50%) scale(.8) rotate(140deg)}
  100%{opacity:0}
}

/* 폭발(탈) — 두 번째 발 타이밍 */
@keyframes boom2{
  0%,60%{opacity:0; transform:translate(-50%,-50%) scale(.2)}
  62%{
    opacity:1; transform:translate(-50%,-50%) scale(2.2);
    box-shadow:
            0 0 28px rgba(255,240,160,1),
            0 0 64px rgba(255,210,90,.95),
            0 0 110px rgba(255,180,60,.85);
  }
  66%{opacity:.6; transform:translate(-50%,-50%) scale(1.6)}
  72%{opacity:.2; transform:translate(-50%,-50%) scale(1.2)}
  80%{opacity:0}
  100%{opacity:0; transform:translate(-50%,-50%) scale(.2)}
}
/* 스파크(탈) */
@keyframes sparks2{
  0%,60%{opacity:0; transform:translate(-50%,-50%) scale(.3) rotate(0)}
  62%{opacity:1; transform:translate(-50%,-50%) scale(1.4) rotate(40deg)}
  68%{opacity:.5; transform:translate(-50%,-50%) scale(1.1) rotate(90deg)}
  78%{opacity:0; transform:translate(-50%,-50%) scale(.8) rotate(140deg)}
  100%{opacity:0}
}
