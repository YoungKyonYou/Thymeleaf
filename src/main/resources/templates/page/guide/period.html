<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!-- 레이아웃에 이 페이지의 본문(content) 프래그먼트를 주입 -->
<th:block th:replace="~{component/commonHead :: layout(~{::content})}">
    <th:block th:fragment="content">

        <section class="section">
            <div class="section-header">
                <div class="title-wrap">
                    <h3 class="section-title">회원현황 상세목록 조회</h3>
                </div>

                <div class="box-wrap">
                    <div class="box col2">
                        <p class="field-title">조회기간</p>
                        <div class="flex col-">
                            <div class="dropdown" data-name="traf" style="width:150px;">
                                <button type="button"
                                        class="dropdown_button"
                                        aria-haspopup="listbox"
                                        aria-expanded="false"
                                        aria-label="조회기간 드롭다운">
                                    <span class="dropdown_value" data-placeholder="전체">전체</span>
                                </button>
                                <ul class="dropdown_list" role="listbox" tabindex="-1">
                                    <li role="option" class="dropdown_option" data-value="bus">전체</li>
                                    <li role="option" class="dropdown_option" data-value="taxi">3개월</li>
                                    <li role="option" class="dropdown_option" data-value="car">1개월</li>
                                </ul>
                                <input type="hidden" name="traf" value="">
                            </div>

                            <div class="flex align-center col-">
                                <div class="date-field">
                                    <input type="text" id="startDate" class="text-field date-text" value="2025-01-10">
                                </div>
                                <span>~</span>
                                <div class="date-field">
                                    <input type="text" id="endDate" class="text-field date-text" value="2025-01-10">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="btn-wrap">
                    <button type="button" class="btn btn-secondary btn-icon-left">
                        다운로드
                        <i class="icon icon-save"></i>
                    </button>
                    <button type="button" class="btn btn-primary btn-icon-left">
                        검색
                        <i class="icon icon-search"></i>
                    </button>
                </div>
            </div>

            <div class="section-content">
                <div class="title-wrap">
                    <h3 class="section-title">회원현황</h3>
                </div>

                <div class="chart-wrap">
                    <canvas id="monthlyBar"></canvas>
                </div>

                <div class="spacer"></div>

                <div class="table-wrap">
                    <table class="table">
                        <caption class="blind">사업 목록 테이블</caption>
                        <colgroup>
                            <col style="width: 60px;"><col><col><col><col style="width: 80px;">
                        </colgroup>
                        <thead>
                        <tr>
                            <th scope="col">No</th>
                            <th scope="col">카테고리</th>
                            <th scope="col">사업명</th>
                            <th scope="col">진행상황</th>
                            <th scope="col">Y/N</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>203</td><td>카테고리</td><td>안전한 우리집 (안전한 가정환경)</td><td>진행상황</td><td>Y</td>
                        </tr>
                        <tr>
                            <td>203</td><td>카테고리</td><td>안전한 우리집 (안전한 가정환경)</td><td>진행상황</td><td>Y</td>
                        </tr>
                        <tr>
                            <td>203</td><td>카테고리</td><td>안전한 우리집 (안전한 가정환경)</td><td>진행상황</td><td>Y</td>
                        </tr>
                        <tr>
                            <td>203</td><td>카테고리</td><td>안전한 우리집 (안전한 가정환경)</td><td>진행상황</td><td>Y</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3"></script>

        <!-- jQuery datepicker → 바닐라 JS (브라우저 기본 날짜 피커) -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var ids = ['startDate', 'endDate'];
                for (var i = 0; i < ids.length; i++) {
                    var el = document.getElementById(ids[i]);
                    if (el) el.type = 'date';
                }
            });
        </script>

        <!-- 차트 스크립트(원본 유지) -->
        <script>
            const ctx = document.getElementById('monthlyBar');

            const labels = ['2025-08','2025-07','2025-06','2025-05'];
            const blue   = [4.2, 2.8, 3.5, 4.6];
            const black  = [2.3, 4.7, 1.6, 2.9];

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels,
                    datasets: [
                        {
                            label: 'A',
                            data: blue,
                            backgroundColor: '#861c7f',
                            borderRadius: 2,
                            barThickness: 50,
                            categoryPercentage: 0.7,
                            order: 1
                        },
                        {
                            label: 'B',
                            data: black,
                            backgroundColor: '#e3933a',
                            borderRadius: 2,
                            barThickness: 50,
                            categoryPercentage: 0.7,
                            order: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(0,0,0,0.08)' },
                            ticks: { color: '#666', maxRotation: 0 }
                        },
                        y: {
                            min: 0, max: 5,
                            ticks: { stepSize: 1, color: '#666' },
                            grid: { color: 'rgba(0,0,0,0.08)' }
                        }
                    }
                }
            });
        </script>

        <!-- 공통 푸터 -->
        <th:block th:replace="~{component/commonFooter :: commonFooter}"></th:block>

    </th:block>
</th:block>
</html>
