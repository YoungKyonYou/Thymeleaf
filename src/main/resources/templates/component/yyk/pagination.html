<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Pager Fragment</title>
</head>
<body>

<th:block th:fragment="pager(pageData)">

    <div class="mt20">
        <div class="pagination" role="navigation" aria-label="목록 페이지 이동">

            <!-- Prev -->
            <button type="button"
                    class="pager-btn prev"
                    aria-label="이전 페이지"
                    th:classappend="${pageData == null || !pageData.hasPrev} ? ' disabled'"
                    th:attr="data-page=${pageData != null ? pageData.page - 1 : 0}">
                Prev
            </button>

            <!-- 숫자 버튼: 현재 블록만 표시 (blockSize=10) -->
            <th:block th:if="${pageData != null}"
                      th:with="
                      current = ${pageData.page},
                      totalPages = ${pageData.getTotalPages()},
                      totalPagesInt = ${T(java.lang.Math).toIntExact(totalPages)},
                      blockIdx = ${current / 10},
                      blockStart = ${blockIdx * 10},
                      blockEnd = ${T(java.lang.Math).min(blockStart + 9, totalPagesInt - 1)}">

                <button type="button"
                        class="pager-item"
                        th:each="i : ${#numbers.sequence(blockStart, blockEnd)}"
                        th:classappend="${i == pageData.page} ? ' is-active'"
                        th:attr="data-page=${i}"
                        th:aria-current="${i == pageData.page} ? 'page' : null"
                        th:text="${i + 1}">
                    1
                </button>
            </th:block>

            <!-- Next -->
            <button type="button"
                    class="pager-btn next"
                    aria-label="다음 페이지"
                    th:classappend="${pageData == null || !pageData.hasNext} ? ' disabled'"
                    th:attr="data-page=${pageData != null ? pageData.page + 1 : 0}">
                Next
            </button>

        </div>
    </div>

</th:block>

</body>
</html>